<rewrite>
  <rules>
    <rule name="EnforceSecureUrl"
          stopProcessing="true"
          enabled="false">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTPS}"
             pattern="off"
             ignoreCase="true" />
      </conditions>
      <action type="Redirect"
              redirectType="Found"
              url="https://{HTTP_HOST}/{R:1}" />
    </rule>
  </rules>
  <outboundRules>
    <rule name="EnableHsts"
          enabled="true">
      <match serverVariable="RESPONSE_Strict_Transport_Security"
             pattern=".*" />
      <conditions>
        <add input="{HTTPS}"
             pattern="on"
             ignoreCase="true" />
      </conditions>
      <action type="Rewrite"
              value="max-age=31536000" />
    </rule>
    <!--<rule name="Set CSP if not defined">
            <match serverVariable="RESPONSE_Content_Security_Policy" pattern="^$" />
            <action type="Rewrite" value="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline' use.typekit.net p.typekit.net; font-src use.typekit.net; img-src 'self' data:" />
        </rule>-->
  </outboundRules>
</rewrite>
